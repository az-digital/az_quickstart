import{DateTime as t}from"@easepick/datetime";import{BasePlugin as e}from"@easepick/base-plugin";class s extends e{dependencies=["RangePlugin"];binds={onView:this.onView.bind(this),onClick:this.onClick.bind(this)};options={customLabels:["Today","Yesterday","Last 7 Days","Last 30 Days","This Month","Last Month"],customPreset:{},position:"left"};getName(){return"PresetPlugin"}onAttach(){if(!Object.keys(this.options.customPreset).length){const e=new t,s=()=>{const s=e.clone();s.setDate(1);const i=new Date(e.getFullYear(),e.getMonth()+1,0);return[new t(s),new t(i)]},i=()=>{const s=e.clone();s.setMonth(s.getMonth()-1),s.setDate(1);const i=new Date(e.getFullYear(),e.getMonth(),0);return[new t(s),new t(i)]},n=[[e.clone(),e.clone()],[e.clone().subtract(1,"day"),e.clone().subtract(1,"day")],[e.clone().subtract(6,"day"),e.clone()],[e.clone().subtract(29,"day"),e.clone()],s(),i()];Object.values(this.options.customLabels).forEach(((t,e)=>{this.options.customPreset[t]=n[e]}))}this.picker.on("view",this.binds.onView),this.picker.on("click",this.binds.onClick)}onDetach(){this.picker.off("view",this.binds.onView),this.picker.off("click",this.binds.onClick)}onView(t){const{view:e,target:s}=t.detail;if("Main"===e){const t=document.createElement("div");t.className="preset-plugin-container",Object.keys(this.options.customPreset).forEach((e=>{if(Object.prototype.hasOwnProperty.call(this.options.customPreset,e)){const s=this.options.customPreset[e],i=document.createElement("button");i.className="preset-button unit",i.innerHTML=e,i.dataset.start=s[0].getTime(),i.dataset.end=s[1].getTime(),t.appendChild(i),this.picker.trigger("view",{view:"PresetPluginButton",target:i})}})),s.appendChild(t),s.classList.add(`preset-${this.options.position}`),this.picker.trigger("view",{view:"PresetPluginContainer",target:t})}}onClick(e){const s=e.target;if(s instanceof HTMLElement){const e=s.closest(".unit");if(!(e instanceof HTMLElement))return;if(this.isPresetButton(e)){const s=new t(Number(e.dataset.start)),i=new t(Number(e.dataset.end));this.picker.options.autoApply?(this.picker.setDateRange(s,i),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.picker.datePicked=[s,i],this.picker.renderAll())}}}isPresetButton(t){return t.classList.contains("preset-button")}}export{s as PresetPlugin};
