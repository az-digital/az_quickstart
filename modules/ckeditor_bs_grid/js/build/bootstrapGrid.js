!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CKEditor5=e():(t.CKEditor5=t.CKEditor5||{},t.CKEditor5.bootstrapGrid=e())}(self,(()=>(()=>{var t={"ckeditor5/src/core.js":(t,e,r)=>{t.exports=r("dll-reference CKEditor5.dll")("./src/core.js")},"ckeditor5/src/ui.js":(t,e,r)=>{t.exports=r("dll-reference CKEditor5.dll")("./src/ui.js")},"ckeditor5/src/widget.js":(t,e,r)=>{t.exports=r("dll-reference CKEditor5.dll")("./src/widget.js")},"dll-reference CKEditor5.dll":t=>{"use strict";t.exports=CKEditor5.dll}},e={};function r(o){var s=e[o];if(void 0!==s)return s.exports;var i=e[o]={exports:{}};return t[o](i,i.exports,r),i.exports}r.d=(t,e)=>{for(var o in e)r.o(e,o)&&!r.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var o={};return(()=>{"use strict";r.d(o,{default:()=>g});var t=r("ckeditor5/src/core.js"),e=r("ckeditor5/src/widget.js");function s(t){return(0,e.isWidget)(t)&&!!t.getCustomProperty("bsGrid")}function i(t){const e=t.getSelectedElement();if(e&&s(e))return e;if(null===t.getFirstPosition())return null;let{parent:r}=t.getFirstPosition();for(;r;){if(r.is("element")&&s(r))return r;r=r.parent}return null}function n(t,e,r){r=r||!1;let o="";if("function"==typeof t.getAttribute?o=t.getAttribute("class"):"string"==typeof t.className&&(o=t.className),!o)return"";const s=o.split(" ").filter((t=>0!==t.lastIndexOf("ck-widget",0)&&0!==t.lastIndexOf("ck-edit",0)&&0!==t.lastIndexOf("bsg-",0)&&(r?0===t.lastIndexOf(e,0):0!==t.lastIndexOf(e,0))));return s.length?s.join(" ").trim():""}function a(t){const r={};let o=!1;r.container_wrapper_class=n(t,"bs_grid");const s=t.getChild(0);if(i=s,(0,e.isWidget)(i)&&i.getCustomProperty("bsGridContainer")){r.add_container=1,r.container_class=n(s,"container");const t=n(s,"container",!0);t.length&&(-1!==t.indexOf("container-fluid")?r.container_type="fluid":r.container_type="default"),o=s.getChild(0)}else o=s;var i;const a=n(o,"row");return r.no_gutter=-1!==a.indexOf("no-gutters")?1:0,r.row_class=a.replace("no-gutters","").replace("g-0",""),r.breakpoints={none:{layout:o.getAttribute("data-row-none")},sm:{layout:o.getAttribute("data-row-sm")},md:{layout:o.getAttribute("data-row-md")},lg:{layout:o.getAttribute("data-row-lg")},xl:{layout:o.getAttribute("data-row-xl")},xxl:{layout:o.getAttribute("data-row-xxl")}},r.num_columns=0,Array.from(o.getChildren()).forEach(((t,e)=>{if(function(t){return!!t.getCustomProperty("bsGridCol")}(t)){r.num_columns+=1;const o=n(t,"col");r[`col_${e+1}_classes`]=o}})),r}class l extends t.Command{execute(t){const{model:e}=this.editor,r=function(t){const e=t.getSelectedElement();return(r=e)&&r.is("element","bsGrid")?e:t.getFirstPosition().findAncestor("bsGrid");var r}(e.document.selection);e.change((o=>{r?function(t,e,r){let o=!1,s=!1;const i={class:"bs_grid"};void 0!==r.container_wrapper_class&&(i.class+=` ${r.container_wrapper_class}`),i.class=i.class.trim(),t.setAttributes(i,e);const n=e.getChild(0);var a;(a=n)&&a.is("element","bsGridContainer")?(o=n,s=n.getChild(0)):s=n;const l={class:r.row_class.trim(),"data-row-none":r.breakpoints.none?r.breakpoints.none.layout:"","data-row-sm":r.breakpoints.sm?r.breakpoints.sm.layout:"","data-row-md":r.breakpoints.md?r.breakpoints.md.layout:"","data-row-lg":r.breakpoints.lg?r.breakpoints.lg.layout:"","data-row-xl":r.breakpoints.xl?r.breakpoints.xl.layout:"","data-row-xxl":r.breakpoints.xxl?r.breakpoints.xxl.layout:""};t.setAttributes(l,s);for(let e=1;e<=r.num_columns;e++){const o=`col_${e}_classes`;t.setAttributes({class:r[o]},s.getChild(e-1))}if(r.add_container){const i={class:r.container_class.trim()};o?t.setAttributes(i,o):(o=t.createElement("bsGridContainer",i),t.append(o,e),t.append(s,o))}else o&&t.unwrap(o)}(o,r,t):e.insertContent(function(t,e){const r={class:"bs_grid"};void 0!==e.container_wrapper_class&&(r.class+=` ${e.container_wrapper_class}`);const o=t.createElement("bsGrid",r),s={class:e.row_class.trim(),"data-row-none":e.breakpoints.none?e.breakpoints.none.layout:"","data-row-sm":e.breakpoints.sm?e.breakpoints.sm.layout:"","data-row-md":e.breakpoints.md?e.breakpoints.md.layout:"","data-row-lg":e.breakpoints.lg?e.breakpoints.lg.layout:"","data-row-xl":e.breakpoints.xl?e.breakpoints.xl.layout:"","data-row-xxl":e.breakpoints.xxl?e.breakpoints.xxl.layout:""},i=t.createElement("bsGridRow",s);for(let r=1;r<=e.num_columns;r++){const o=`col_${r}_classes`,s=t.createElement("bsGridCol",{class:e[o]}),n=t.createElement("paragraph");t.insertText(`Column ${r} content`,n),t.append(n,s),t.append(s,i)}if(e.add_container){const r={class:e.container_class.trim()},s=t.createElement("bsGridContainer",r);t.append(s,o),t.append(i,s)}else t.append(i,o);return o}(o,t))}))}refresh(){const{model:t}=this.editor,{selection:e}=t.document,r=t.schema.findAllowedParent(e.getFirstPosition(),"bsGrid");this.isEnabled=null!==r}}class d extends t.Plugin{static get requires(){return[e.Widget]}static get pluginName(){return"BootstrapGridEditing"}constructor(t){super(t),this.attrs={class:"class","data-row-none":"data-row-none","data-row-sm":"data-row-sm","data-row-md":"data-row-md","data-row-lg":"data-row-lg","data-row-xl":"data-row-xl","data-row-xxl":"data-row-xxl"}}init(){this.editor.config.get("bootstrapGrid")&&(this._defineSchema(),this._defineConverters(),this._defineCommands())}_defineSchema(){const{schema:t}=this.editor.model;t.register("bsGrid",{allowWhere:"$block",isLimit:!0,isObject:!0,allowAttributes:["class"]}),t.register("bsGridContainer",{isLimit:!0,allowIn:"bsGrid",isInline:!0,allowAttributes:["class"]}),t.register("bsGridRow",{isLimit:!0,allowIn:["bsGrid","bsGridContainer"],isInline:!0,allowAttributes:Object.keys(this.attrs)}),t.register("bsGridCol",{allowIn:"bsGridRow",isInline:!0,allowContentOf:"$root",allowAttributes:["class"]})}_defineConverters(){const{conversion:t}=this.editor;t.for("upcast").elementToElement({model:"bsGrid",view:{name:"div",classes:"bs_grid"}}),t.for("downcast").elementToElement({model:"bsGrid",view:(t,{writer:r})=>{const o=r.createContainerElement("div",{class:"bs_grid"});return r.setCustomProperty("bsGrid",!0,o),(0,e.toWidget)(o,r,{label:"BS Grid"})}}),t.for("upcast").elementToElement({model:"bsGridContainer",view:{name:"div"}}),t.for("downcast").elementToElement({model:"bsGridContainer",view:(t,{writer:r})=>{const o=r.createContainerElement("div");return r.setCustomProperty("bsGridContainer",!0,o),(0,e.toWidget)(o,r,{label:"BS Grid Container"})}}),t.for("upcast").elementToElement({view:{name:"div",classes:["row"]},converterPriority:"high",model:(t,{writer:e})=>e.createElement("bsGridRow",{class:t.getAttribute("class")||"row"})}),t.for("downcast").elementToElement({model:"bsGridRow",view:(t,{writer:r})=>{const o={class:t.getAttribute("class")||"row","data-row-none":t.getAttribute("data-row-none"),"data-row-sm":t.getAttribute("data-row-sm"),"data-row-md":t.getAttribute("data-row-md"),"data-row-lg":t.getAttribute("data-row-lg"),"data-row-xl":t.getAttribute("data-row-xl"),"data-row-xxl":t.getAttribute("data-row-xxl")},s=r.createContainerElement("div",o);return r.setCustomProperty("bsGridRow",!0,s),(0,e.toWidget)(s,r,{label:"BS Grid Row"})}}),t.for("upcast").elementToElement({model:"bsGridCol",view:{name:"div"}}),t.for("editingDowncast").elementToElement({model:"bsGridCol",view:(t,{writer:r})=>{const o=r.createEditableElement("div");return r.setCustomProperty("bsGridCol",!0,o),(0,e.toWidgetEditable)(o,r)}}),t.for("dataDowncast").elementToElement({model:"bsGridCol",view:{name:"div",classes:""}}),Object.keys(this.attrs).forEach((e=>{const r={model:{key:e,name:"bsGridRow"},view:{name:"div",key:this.attrs[e]}};t.for("downcast").attributeToAttribute(r),t.for("upcast").attributeToAttribute(r)})),t.attributeToAttribute({model:"class",view:"class"})}_defineCommands(){this.editor.commands.add("insertBootstrapGrid",new l(this.editor))}}var c=r("ckeditor5/src/ui.js");class u extends t.Plugin{init(){const{editor:t}=this,e=t.config.get("bootstrapGrid");if(!e)return;const{dialogURL:r,openDialog:o,dialogSettings:s={}}=e;r&&"function"==typeof o&&t.ui.componentFactory.add("bootstrapGrid",(e=>{const i=t.commands.get("insertBootstrapGrid"),n=new c.ButtonView(e);return n.set({label:t.t("Bootstrap Grid"),icon:'<?xml version="1.0" standalone="yes"?>\n<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16">\n<path style="fill:#ffffff; stroke:none;" d="M0 0L0 16L16 16L16 0L0 0z"/>\n<path style="fill:#010101; stroke:none;" d="M1 3L1 6L10 6L10 3L1 3M11 3L11 6L15 6L15 3L11 3M1 7L1 10L5 10L5 7L1 7M6 7L6 10L10 10L10 7L6 7M11 7L11 10L15 10L15 7L11 7M1 11L1 14L15 14L15 11L1 11z"/>\n</svg>\n',tooltip:!0}),n.bind("isOn","isEnabled").to(i,"value","isEnabled"),this.listenTo(n,"execute",(()=>{o(r,(({settings:e})=>{t.execute("insertBootstrapGrid",e)}),s)})),n}))}}class m extends t.Plugin{static get requires(){return[e.WidgetToolbarRepository]}static get pluginName(){return"BootstrapGridToolbar"}init(){const{editor:e}=this,r=e.config.get("bootstrapGrid");if(!r)return;const{dialogURL:o,openDialog:s,dialogSettings:n={}}=r;o&&"function"==typeof s&&e.ui.componentFactory.add("bootstrapGridEdit",(r=>{const s=new c.ButtonView(r);return s.set({label:e.t("Edit Grid"),icon:t.icons.pencil,tooltip:!0,withText:!0}),this.listenTo(s,"execute",(()=>{let t={};const{selection:r}=e.editing.view.document,s=i(r);s&&(t=a(s),t.saved=1),this._openDialog(o,t,(({settings:t})=>{e.execute("insertBootstrapGrid",t),e.editing.view.focus()}),n)})),s}))}afterInit(){const{editor:t}=this;t.plugins.get("WidgetToolbarRepository").register("bootstrapGrid",{items:["bootstrapGridEdit"],getRelatedElement:t=>i(t)})}_openDialog(t,e,r,o){const s=o.dialogClass?o.dialogClass.split(" "):[];s.push("ui-dialog--narrow"),o.dialogClass=s.join(" "),o.autoResize=window.matchMedia("(min-width: 600px)").matches,o.width="auto";Drupal.ajax({dialog:o,dialogType:"modal",selector:".ckeditor5-dialog-loading-link",url:t,progress:{type:"fullscreen"},submit:{editor_object:e}}).execute(),Drupal.ckeditor5.saveCallback=r}}class p extends t.Plugin{static get requires(){return[d,u,m]}static get pluginName(){return"BootstrapGrid"}}const g={BootstrapGrid:p}})(),o=o.default})()));