/**
* DO NOT EDIT THIS FILE.
* See the following change record for more information,
* https://www.drupal.org/node/2815083
* @preserve
**/
(function (drupalSettings) {
  document.addEventListener('DOMContentLoaded', function () {
    var filterContainer = document.querySelector('.az-bef-vertical');
    if (!filterContainer) return;
    var clearAllButton = filterContainer.querySelector('.js-finder-clear-all');
    var filterCountDisplay = clearAllButton.querySelector('.js-finder-filter-count');
    var searchInput = filterContainer.querySelector('input[name="search"]');
    var svgLevel0ReplaceButtons = filterContainer.querySelectorAll('.js-svg-replace-level-0');
    var svgLevel1ReplaceButtons = filterContainer.querySelectorAll('.js-svg-replace-level-1');
    var accordionButtons = filterContainer.querySelectorAll('.collapser');
    var _drupalSettings$azFin = drupalSettings.azFinder,
      _drupalSettings$azFin2 = _drupalSettings$azFin.minSearchLength,
      minSearchLength = _drupalSettings$azFin2 === void 0 ? 1 : _drupalSettings$azFin2,
      icons = _drupalSettings$azFin.icons;
    function getNewSVGMarkup(isExpanded, level) {
      if (level === 0) {
        return isExpanded ? icons.level_0_expand : icons.level_0_collapse;
      }
      return isExpanded ? icons.level_1_expand : icons.level_1_collapse;
    }
    function toggleSVG(button, level) {
      var isExpanded = button.getAttribute('aria-expanded') === 'true';
      var newSVGMarkup = getNewSVGMarkup(isExpanded, level);
      button.querySelector('svg').outerHTML = newSVGMarkup;
    }
    svgLevel0ReplaceButtons.forEach(function (button) {
      button.addEventListener('click', function () {
        return toggleSVG(button, 0);
      });
    });
    svgLevel1ReplaceButtons.forEach(function (button) {
      button.addEventListener('click', function () {
        return toggleSVG(button, 1);
      });
    });
    function updateActiveFilterDisplay() {
      var activeCheckboxes = filterContainer.querySelectorAll('input[type="checkbox"]:checked');
      var activeFilterCount = activeCheckboxes.length;
      if (searchInput.value.trim().length >= minSearchLength) {
        activeFilterCount += 1;
      }
      filterCountDisplay.textContent = "(".concat(activeFilterCount, ")");
      clearAllButton.classList.toggle('d-none', activeFilterCount === 0);
    }
    function deselectAllCheckboxes() {
      var checkboxes = filterContainer.querySelectorAll('input[type="checkbox"]');
      checkboxes.forEach(function (checkbox) {
        checkbox.checked = false;
      });
      updateActiveFilterDisplay();
    }
    function resetAllFilters() {
      searchInput.value = '';
      deselectAllCheckboxes();
      filterContainer.querySelector('.js-form-submit').click();
    }
    clearAllButton.addEventListener('click', function (event) {
      event.preventDefault();
      resetAllFilters();
    });
    filterContainer.addEventListener('change', function (event) {
      if (event.target.type === 'checkbox' || event.target === searchInput) {
        updateActiveFilterDisplay();
      }
    });
    searchInput.addEventListener('input', updateActiveFilterDisplay);
    function handleAccordionButtonKeydown(event) {
      if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        event.currentTarget.click();
      }
    }
    accordionButtons.forEach(function (button) {
      button.addEventListener('keydown', handleAccordionButtonKeydown);
    });
    updateActiveFilterDisplay();
  });
})(drupalSettings);