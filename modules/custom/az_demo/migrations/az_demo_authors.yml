id: az_demo_authors
label: AZ Quickstart Demo Authors
status: true
migration_tags:
  - Quickstart Demo Content
  - Content
migration_dependencies:
  required:
    - az_demo_person_node
dependencies:
  enforced:
    module:
      - az_demo
      - az_publication

source:
  plugin: url
  data_fetcher_plugin: file
  data_parser_plugin: json
  urls:
    - profiles/custom/az_quickstart/modules/custom/az_demo/data/az_demo_authors.json
  item_selector: authors
  ids:
    id:
      type: integer
  fields:
    - name: id
      selector: id
    - name: name
      selector: name
process:
  psuedo_deconstruct_name:
    - plugin: az_name_deconstruct
      source: name
  field_az_author_non_drop_particle: '@psuedo_deconstruct_name/non_drop_particle'
  field_az_author_lname: '@psuedo_deconstruct_name/lastname'
  field_az_author_fname: '@psuedo_deconstruct_name/firstname'
  field_az_author_suffix: '@psuedo_deconstruct_name/suffix'
  field_az_author_person:
    - plugin: entity_lookup
      access_check: false
      entity_type: node
      bundle_key: type
      bundle: az_person
      value_key: title
      ignore_case: true
      source: name

destination:
  plugin: entity:az_author
