# Library definition for AZ GDPR Consent Management
gdpr_consent:
  version: 1.0
  css:
    theme:
      css/az-gdpr-consent.css: {}
  js:
    # Remote video consent handler must load first to intercept script creation
    js/az-gdpr-remote-video-consent-handler.js: { preprocess: false }
    # Main consent script loads after handler but before Klaro
    # Using defer to ensure drupalSettings is available when script executes
    js/az-gdpr-consent.js: { preprocess: false, attributes: { defer: true } }
  # Load this script in the header to ensure it runs before Klaro loads
  header: true
  # Depend on drupalSettings to ensure it's available
  dependencies:
    - core/drupalSettings
